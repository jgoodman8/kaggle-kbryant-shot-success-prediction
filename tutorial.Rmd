---
title: "Kaggle Competition: Kobe Bryant Shot Selection"
author: "Javier Guzmán Figueira Domínguez"
date: "12/03/2018"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(tidy.opts = list(width.cutoff = 60), tidy = TRUE)
knitr::opts_knit$set(root.dir = "C:/Users/cento/Documents/MasterUIMP/Practicas/supervisados/kobe-bryant-shot-selection")
```

# Introducción

En este documento se tratará el problema presentado la competición de [Kaggle](https://www.kaggle.com/) bajo el título [Kobe Bryant Shot Selection](https://www.kaggle.com/c/kobe-bryant-shot-selection). El objetivo de esta competición es la de realizar una clasificación de tiros encestados y fallados por Kobe Bryant.

La competición proporciona un dataset con 30.697 instancias y 25 variables, incluída la variable clase. Esta variable clase está definida de forma binaria, tomando valor 1 en caso de tratarse de un tiro acertado y 0 en caso de un tiro fallido.

El conjunto de test está representado por un subconjunto de 5.000 intancias con ausencia de la etiqueta de clase. Para estas instancias, se deberá de predecir la probabilidad que cada tiro se enceste. El *score* utilizado por *Kaggle* en esta competición es la pérdida logarítica o *log loss*.

```{r}
data <- read.csv("data.csv")

dim(data)

sum(is.na(data))

sum(is.na(dplyr::select(data, - shot_made_flag)))
sum(is.na(data$shot_made_flag))
```

# Análisis de la variables

```{r}
str(data)
```

## action_type

Variable que referencia el tipo de acción mediante el que se realizó/intentó la canasta. Se definen 57 tipos diferentes de acciones, siendo *Jump Shot* la más frecuente.

```{r}
levels(data$action_type)
```

```{r}
actions <- train %>% count(data$action_type) %>% arrange(desc(n)) %>% filter(n < 20)
train$action_type[train$action_type %in% actions$action_type] <- "Other"
```